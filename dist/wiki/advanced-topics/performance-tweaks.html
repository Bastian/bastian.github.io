<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Performance Tweaks | Javacord</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon-96x96.png">
    <meta name="description" content="The Javacord website">
    <link rel="preload" href="/assets/css/0.styles.a1fb650d.css" as="style"><link rel="preload" href="/assets/js/app.2a4b19a4.js" as="script"><link rel="preload" href="/assets/js/2.794a2b38.js" as="script"><link rel="preload" href="/assets/js/11.d7cac204.js" as="script"><link rel="prefetch" href="/assets/js/10.dad849ea.js"><link rel="prefetch" href="/assets/js/12.a99823d7.js"><link rel="prefetch" href="/assets/js/13.b485f8a2.js"><link rel="prefetch" href="/assets/js/14.c6106768.js"><link rel="prefetch" href="/assets/js/15.3c7cdeb1.js"><link rel="prefetch" href="/assets/js/16.d3093f40.js"><link rel="prefetch" href="/assets/js/17.e3d00990.js"><link rel="prefetch" href="/assets/js/18.7cc0cf75.js"><link rel="prefetch" href="/assets/js/19.71f6eee7.js"><link rel="prefetch" href="/assets/js/20.0808a7b9.js"><link rel="prefetch" href="/assets/js/21.8aba7b32.js"><link rel="prefetch" href="/assets/js/22.74941ef1.js"><link rel="prefetch" href="/assets/js/23.0c7d26dc.js"><link rel="prefetch" href="/assets/js/24.ada02605.js"><link rel="prefetch" href="/assets/js/25.2339a445.js"><link rel="prefetch" href="/assets/js/26.5744d686.js"><link rel="prefetch" href="/assets/js/27.2f096731.js"><link rel="prefetch" href="/assets/js/28.9a10c7da.js"><link rel="prefetch" href="/assets/js/3.74618a5c.js"><link rel="prefetch" href="/assets/js/4.2e7eda08.js"><link rel="prefetch" href="/assets/js/5.0e628205.js"><link rel="prefetch" href="/assets/js/6.fdef01cf.js"><link rel="prefetch" href="/assets/js/7.e90e4683.js"><link rel="prefetch" href="/assets/js/8.53ed1a19.js"><link rel="prefetch" href="/assets/js/9.0a9764f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a1fb650d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Javacord</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">
  Wiki
</a></div><div class="nav-item"><a href="https://docs.javacord.org/" target="_self" rel="" class="nav-link external">
  JavaDocs
  <!----></a></div><div class="nav-item"><a href="https://discord.gg/0qJ2jjyneLEgG7y3" target="_self" rel="" class="nav-link external">
  Discord Server
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">
  Wiki
</a></div><div class="nav-item"><a href="https://docs.javacord.org/" target="_self" rel="" class="nav-link external">
  JavaDocs
  <!----></a></div><div class="nav-item"><a href="https://discord.gg/0qJ2jjyneLEgG7y3" target="_self" rel="" class="nav-link external">
  Discord Server
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/getting-started/" class="sidebar-link">Intro</a></li><li><a href="/wiki/getting-started/download-installation.html" class="sidebar-link">Download / Installation</a></li><li><a href="/wiki/getting-started/creating-a-bot-account.html" class="sidebar-link">Creating a Bot Account</a></li><li><a href="/wiki/getting-started/writing-your-first-bot.html" class="sidebar-link">Writing your first bot</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Beginner IDE Setup</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basic Tutorials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/basic-tutorials/listeners.html" class="sidebar-link">Listeners</a></li><li><a href="/wiki/basic-tutorials/embeds.html" class="sidebar-link">Embeds</a></li><li><a href="/wiki/basic-tutorials/emojis-and-reactions.html" class="sidebar-link">Emojis and Reactions</a></li><li><a href="/wiki/basic-tutorials/message-builder.html" class="sidebar-link">Using the MessageBuilder</a></li><li><a href="/wiki/basic-tutorials/creating-entities.html" class="sidebar-link">Creating Channels, Invites, etc.</a></li><li><a href="/wiki/basic-tutorials/logger-config.html" class="sidebar-link">Logger Configuration</a></li><li><a href="/wiki/basic-tutorials/glossary.html" class="sidebar-link">Glossary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced Topics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/advanced-topics/bot-lifecycle.html" class="sidebar-link">Bot Lifecycle</a></li><li><a href="/wiki/advanced-topics/entity-cache.html" class="sidebar-link">Entity Cache</a></li><li><a href="/wiki/advanced-topics/ratelimits.html" class="sidebar-link">Ratelimits</a></li><li><a href="/wiki/advanced-topics/sharding.html" class="sidebar-link">Sharding</a></li><li><a href="/wiki/advanced-topics/performance-tweaks.html" class="active sidebar-link">Performance Tweaks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/advanced-topics/performance-tweaks.html#disabling-startup-wait" class="sidebar-link">‚úÇÔ∏è Disabling Startup Wait</a></li><li class="sidebar-sub-header"><a href="/wiki/advanced-topics/performance-tweaks.html#fine-tuning-the-message-cache" class="sidebar-link">‚öôÔ∏è Fine Tuning the Message Cache</a></li><li class="sidebar-sub-header"><a href="/wiki/advanced-topics/performance-tweaks.html#using-the-updater-classes" class="sidebar-link">üíé Using the Updater classes</a></li></ul></li><li><a href="/wiki/advanced-topics/proxies.html" class="sidebar-link">Proxies</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Essential Knowledge</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/essential-knowledge/lambdas.html" class="sidebar-link">Lambdas</a></li><li><a href="/wiki/essential-knowledge/optionals.html" class="sidebar-link">Optionals</a></li><li><a href="/wiki/essential-knowledge/completable-futures.html" class="sidebar-link">Completable Futures</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="performance-tweaks"><a href="#performance-tweaks" class="header-anchor">#</a> Performance Tweaks</h1> <h2 id="disabling-startup-wait"><a href="#disabling-startup-wait" class="header-anchor">#</a> ‚úÇÔ∏è Disabling Startup Wait</h2> <p>By default, Javacord waits for all servers and members being loaded on startup. You can disable this behavior in the <code>DiscordApiBuilder</code> before logging in:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">DiscordApiBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setWaitForServersOnStartup</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">thenAccept</span><span class="token punctuation">(</span>api <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Do something</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exceptionally</span><span class="token punctuation">(</span><span class="token class-name">ExceptionLogger</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Depending on the size of your bot, this can significantly speed up the login process. This comes with one downside however: The <code>api.getServers()</code> collection is empty directly after logging in. You will receive <code>ServerBecomesAvailableEvent</code>s for every server which finished loading.</p> <h2 id="fine-tuning-the-message-cache"><a href="#fine-tuning-the-message-cache" class="header-anchor">#</a> ‚öôÔ∏è Fine Tuning the Message Cache</h2> <p>In order to reduce memory usage, you can completely disable the message cache or reduce the number of cached messages. By default, Javacord caches up to 50 messages per channel and removes messages from cache which are older than 12 hours. You can lower this limit by using <code>DiscordApi#setMessageCacheSize(Capacity, StorageTimeInSeconds)</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Cache a maximum of 10 messages per channel for and remove messages older than 1 hour</span>
api<span class="token punctuation">.</span><span class="token function">setMessageCacheSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can even set this limit on a per-channel basis:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">TextChannel</span> channel <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">getMessageCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCapacity</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">getMessageCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStorageTimeInSeconds</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="using-the-updater-classes"><a href="#using-the-updater-classes" class="header-anchor">#</a> üíé Using the Updater classes</h2> <p>If you update several settings of an entity (server, channel, ...) at once, you should use the updater for this entity instead of the <code>updateXyz(...)</code> methods.</p> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Sends 1 request to Discord</span>
<span class="token class-name">ServerTextChannel</span> channel <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">ServerTextChannelUpdater</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;example-channel&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setTopic</span><span class="token punctuation">(</span><span class="token string">&quot;This is an example channel&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setNsfwFlag</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>instead of</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Sends 3 requests to Discord</span>
<span class="token class-name">ServerTextChannel</span> channel <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">updateName</span><span class="token punctuation">(</span><span class="token string">&quot;example-channel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">updateTopic</span><span class="token punctuation">(</span><span class="token string">&quot;This is an example channel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">updateNsfwFlag</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/wiki/advanced-topics/sharding.html" class="prev">
        Sharding
      </a></span> <span class="next"><a href="/wiki/advanced-topics/proxies.html">
        Proxies
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2a4b19a4.js" defer></script><script src="/assets/js/2.794a2b38.js" defer></script><script src="/assets/js/11.d7cac204.js" defer></script>
  </body>
</html>
